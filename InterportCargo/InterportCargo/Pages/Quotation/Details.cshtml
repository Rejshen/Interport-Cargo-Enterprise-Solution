@page "{id:int}"
@model InterportCargo.Pages.Quotation.DetailsModel
@{
	 ViewData["Title"] = "Quotation Details";
}

@if (Model.Quote == null)
{
    <p>Quotation not found.</p>
}
else
{
    <h3>Quotation #@Model.Quote.QuotationId</h3>
    <p><strong>Date:</strong> @Model.Quote.CreatedAt:yyyy-MM-dd</p>
    <p><strong>Status:</strong> @Model.Quote.Status</p>
    <p><strong>Customer Response:</strong> @Model.Quote.CustomerResponse</p>
    <p><strong>Container Size:</strong> @Model.Quote.ContainerSize</p>
    <p><strong>Scope:</strong> @Model.Quote.Scope</p>

    <div class="mt-3 p-3 border rounded">
        <p><strong>Subtotal:</strong> $@Model.Quote.Subtotal</p>
        <p><strong>GST (10%):</strong> $@Model.Quote.Gst</p>
        <p><strong>Total:</strong> $@Model.Quote.Total</p>
    </div>

    @if (Model.Quote.CustomerResponse == "Pending")
    {
        <form method="post" class="mt-3">
            <button type="submit" formaction="?handler=Accept" class="btn btn-success me-2">Accept</button>
            <div class="mt-3">
                <label class="form-label">Reject Reason (optional)</label>
                <input asp-for="RejectReason" class="form-control mb-2" />
                <button type="submit" formaction="?handler=Reject" class="btn btn-danger">Reject</button>
            </div>
        </form>
    }
    else
    {
        <div class="alert alert-info mt-3">
            You already responded: <strong>@Model.Quote.CustomerResponse</strong>
        </div>
    }
}